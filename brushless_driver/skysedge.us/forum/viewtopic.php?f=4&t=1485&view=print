<!DOCTYPE html>
<html dir="ltr" lang="en-gb">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="robots" content="noindex" />

<title>A Forum at Sky's Edge &bull; Debugging via USB Serial</title>

<link href="./styles/prosilver/theme/print.css" rel="stylesheet">
<link href="./styles/prosilver/theme/bidi.css" rel="stylesheet">
</head>
<body id="phpbb" class="ltr">
<div id="wrap" class="wrap">
	<a id="top" class="top-anchor" accesskey="t"></a>

	<div id="page-header">
		<h1>A Forum at Sky's Edge</h1>
		<p>Community Forum for Sky&#039;s Edge Hardware<br /><a href="https://skysedge.us/forum/">https://skysedge.us/forum/</a></p>

		<h2>Debugging via USB Serial</h2>
		<p><a href="https://skysedge.us/forum/viewtopic.php?f=4&amp;t=1485">https://skysedge.us/forum/viewtopic.php?f=4&amp;t=1485</a></p>
	</div>

	<div id="page-body" class="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>1</strong></div>
					<div class="post">
				<h3>Debugging via USB Serial</h3>
				<div class="date">Posted: <strong>Sun Apr 26, 2020 1:23 am</strong></div>
				<div class="author">by <strong>SteveC</strong></div>
				<div class="content">I was going to suggest fault finding over USB serial to another user but I couldn't get it to work myself!<br>
I assume this code snippet is intended for debugging:
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>Serial.begin(9600);

Serial.println(level);
</code></pre></div>
etc<br>
<br>
But I don't receive anything over the USB serial. I know the FTDI USB to serial converter is working because I can program via USB (and the Tx/Rx LEDs light during programming) but I can't receive anything over USB serial (no LEDs illuminate either).<br>
<br>
I wonder what Justine did to get this working? Mmm and why is SoftwareSerial needed when the ATmega2560 has 4 UARTS? Is there an issue with MegaCore? Why am I asking so many questions? (sorry)</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Debugging via USB Serial</h3>
				<div class="date">Posted: <strong>Sun Apr 26, 2020 1:55 am</strong></div>
				<div class="author">by <strong>SteveC</strong></div>
				<div class="content">Just wrote a simple sketch to test the USB serial hardware, it works, MegaCore is fine:
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>// Toggle the Status &amp; Hook LEDs
// while sending test strings over USB serial

// Define general output pins
const byte StatusLED = 13;
const byte HookLED = 49;
bool toggle = 1;
int  count = 1;

void setup(){
// Set output pin functions
  pinMode(StatusLED, OUTPUT);
  pinMode(HookLED, OUTPUT);
  Serial.begin(9600);
}

void loop() {
  // put your main code here, to run repeatedly:
  digitalWrite(HookLED, toggle);
  digitalWrite(StatusLED, !toggle);
  Serial.print("USB serial: ");
  Serial.println(count);
  toggle = !toggle;
  count++;
  delay(500);
}</code></pre></div>
This toggles some LEDs while sending text over the USB serial, it works. USB serial should be useful for debugging but for some strange reason I'm not receiving USB serial using Justine's code. I've probably done something stupid.</div>
			</div>
			<hr />
					<div class="post">
				<h3>Re: Debugging via USB Serial</h3>
				<div class="date">Posted: <strong>Sun Apr 26, 2020 4:04 pm</strong></div>
				<div class="author">by <strong>SteveC</strong></div>
				<div class="content">Solved: increase the hardware serial port baud rate to 115200 in line 142 of 'main':
<div class="codebox"><p>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></p><pre><code>//Serial.begin(9600);
Serial.begin(115200);</code></pre></div>
Then you can see debug messages via USB like this:
<div class="inline-attachment">
			
		
				<dl class="file">
			<dt class="attach-image"><img src="./download/file.php?id=12" class="postimage" alt="monitor.jpg" onclick="viewableArea(this);" /></dt>
						<dd>monitor.jpg (25.23 KiB) Viewed 1651 times</dd>
		</dl>
		
		
			</div></div>
			</div>
			<hr />
			</div>

	<div id="page-footer" class="page-footer">
		<div class="page-number">All times are <span title="UTC">UTC</span><br />Page <strong>1</strong> of <strong>1</strong></div>
			<div class="copyright">
				<p>Powered by <a href="https://www.phpbb.com/">phpBB</a>&reg; Forum Software &copy; phpBB Limited
				</p>
							</div>
	</div>
</div>

</body>
</html>
