<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en-gb">
	<link rel="self" type="application/atom+xml" href="http://skysedge.us/forum/app.php/feed/topic/1490" />

	<title>A Forum at Sky's Edge</title>
	<subtitle>Community Forum for Sky&#039;s Edge Hardware</subtitle>
	<link href="http://skysedge.us/forum/index.php" />
	<updated>2020-05-22T21:49:23</updated>

	<author><name><![CDATA[A Forum at Sky's Edge]]></name></author>
	<id>http://skysedge.us/forum/app.php/feed/topic/1490</id>

		<entry>
		<author><name><![CDATA[justine]]></name></author>
		<updated>2020-05-22T21:49:23</updated>

		<published>2020-05-22T21:49:23</published>
		<id>http://skysedge.us/forum/viewtopic.php?t=1490&amp;p=1577#p1577</id>
		<link href="http://skysedge.us/forum/viewtopic.php?t=1490&amp;p=1577#p1577"/>
		<title type="html"><![CDATA[Re: Vibration motor]]></title>

		
		<content type="html" xml:base="http://skysedge.us/forum/viewtopic.php?t=1490&amp;p=1577#p1577"><![CDATA[
Thanks Steve, great info as usual.<p>Statistics: Posted by <a href="http://skysedge.us/forum/memberlist.php?mode=viewprofile&amp;u=2">justine</a> — Fri May 22, 2020 9:49 pm</p><hr />
]]></content>
	</entry>
		<entry>
		<author><name><![CDATA[SteveC]]></name></author>
		<updated>2020-05-22T21:42:00</updated>

		<published>2020-05-22T21:42:00</published>
		<id>http://skysedge.us/forum/viewtopic.php?t=1490&amp;p=1573#p1573</id>
		<link href="http://skysedge.us/forum/viewtopic.php?t=1490&amp;p=1573#p1573"/>
		<title type="html"><![CDATA[Vibration motor]]></title>

		
		<content type="html" xml:base="http://skysedge.us/forum/viewtopic.php?t=1490&amp;p=1573#p1573"><![CDATA[
The February edition board and schematic included a vibration motor with the annotation: "THIS FRIED AN ATMEGA2560V ON ME. SOMETHING WRONG. DON'T POPULATE." After soldering a 100 pin, 0.5mm pitch IC by hand that must have been very upsetting.<br><br>I ordered a motor but it's still on back order from Digi-Key. Meanwhile I found this coin motor (8mm x 3.5mm) in a parts drawer. It's a commutated DC motor so I doubt it's significantly different, electrical noise wise, from the motor Justine selected. This motor is available from many suppliers on AliExpress.<br><br>It got it working under ATmega control, no ATmega was harmed in the process:<div class="inline-attachment"><dl class="file"><dt class="attach-image"><img src="http://skysedge.us/forum/download/file.php?id=25" class="postimage" alt="vibration_motor_board.jpg" onclick="viewableArea(this);" /></dt></dl></div><div class="inline-attachment"><dl class="file"><dt class="attach-image"><img src="http://skysedge.us/forum/download/file.php?id=26" class="postimage" alt="vibration_motor_schematic.png" onclick="viewableArea(this);" /></dt></dl></div>The only electrical noise is approx 350mVpp on the FET drain due to back EMF immediately after motor switch off but due to the clamping diode, it does not go outside the supply rail. Capacitor C14 is not strictly necessary, with it's time constant of a few ms, it removed switch noise of (av 100us) when I used a hardware switch. This circuit works well and no noise gets back to the ATmega. I would also add a 4.7 Ohm resistor in series with the motor lead but I don't have one to hand.<br><br>Finally this is the code I used to switch the motor on/off during testing... and play with power saving (the board consumes 16mA, no FONA, all LEDs off but only 200uA in sleep mode). Enjoy!<br><div class="codebox"><p>CODE: </p><pre><code>// Toggle the Status &amp; Hook LEDs// while sending test strings over USB serial// Investigate power saving, board idle current// without FONA module is 16mA#include &lt;Adafruit_SleepyDog.h&gt;const byte ClearButton = 36;     // Clear selection to all off and sleep during delaysconst byte SignalButton = 34;    // Press to switch on vibration motorconst byte BatteryButton = 37;   // Press to switch on flashing hook &amp; status LEDconst byte SaButton = 35;        // Press to switch from sleep to normal delayconst byte StatusLED = 13;const byte HookLED = 49;const byte VibMotor = 5;bool toggle = 0;bool enableLEDs = 1;bool enableMotor = 0;bool enableSleepy = 1;int  count = 0;void setup(){// Set pin functions  pinMode(StatusLED, OUTPUT);  pinMode(HookLED, OUTPUT);  pinMode(VibMotor, OUTPUT);  pinMode(ClearButton, INPUT_PULLUP);  pinMode(SignalButton, INPUT_PULLUP);  pinMode(BatteryButton, INPUT_PULLUP);  pinMode(SaButton, INPUT_PULLUP);}void loop() {  // put your main code here, to run repeatedly:  if (enableLEDs == true) {    digitalWrite(HookLED, toggle);    digitalWrite(StatusLED, !toggle);    toggle = !toggle;  }  if (enableMotor == true)    digitalWrite(VibMotor, LOW);  // active low to turn on motor  else    digitalWrite(VibMotor, HIGH);   // turn motor off  if (digitalRead(SignalButton) == LOW)    enableMotor = true;  if (digitalRead(BatteryButton) == LOW)    enableLEDs = true;  if (digitalRead(SaButton) == LOW)    enableSleepy = false;  if (digitalRead(ClearButton) == LOW) {    enableMotor = false;    enableLEDs = false;    digitalWrite(HookLED, LOW);    digitalWrite(StatusLED, LOW);    enableSleepy = true;  }  count++;  if (enableSleepy == true)    Watchdog.sleep(500);  else    delay(500);}</code></pre></div><p>Statistics: Posted by <a href="http://skysedge.us/forum/memberlist.php?mode=viewprofile&amp;u=1724">SteveC</a> — Fri May 22, 2020 9:42 pm</p><hr />
]]></content>
	</entry>
	</feed>
